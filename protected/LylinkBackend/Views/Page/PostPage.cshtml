@using LylinkBackend_API.Models
@using System.Text.RegularExpressions
@model PostPage

<!DOCTYPE html>
<html lang="en">
    @{
        Regex tableTagRegex = new(@"<table\b[^>]*>", RegexOptions.IgnoreCase);
    }

    @await Html.PartialAsync("HeadContent", new HeadContent()
    {
        Description = Model.Description,
        Keywords = Model.Keywords,
        NeedsTableStyling = tableTagRegex.IsMatch(Model.Body),
        NeedsEditorTooling = Model.EditorName != null,
        Title = Model.Title,
    })

    <body>
        <div id="adblock-background">
        </div>
        <div id="adblock-popup">
            <p>Hey, it looks like a resource failed to load. If you have an ad-blocker, please turn it off.</p>
            <p>This site will never have ads. Please turn off your ad-blocker so my stylesheets load properly.</p>
            <p>Thank you.</p> 
            <button onclick="closePopup()">Close</button>
        </div>
        <div id="page-container">
            <label id="colorStyleSwitch" class="switch">
                <input id="colorStyleSwitchCheckbox" type="checkbox">
                <span class="slider" onclick="handleColorStyleSwitching()"></span>
            </label>
            <div id="content-wrap">
                <header>
                    <h3>@Html.Raw(Model.ParentHeader)</h3>
                    <h1 id="" website-header"">
                        @Model.PageName
                    </h1>
                    <h5>
                        @Model.UpdatedDateTime
                    </h5>
                </header>
                <div class="container">
                    <main>
                        @Html.Raw(Model.Body)
                    </main>
                </div>
            </div>
            <footer>
                <p>
                    Copyright 2024, All Rights Reserved
                </p>
            </footer>

            @if (Model.EditorName != null)
            {
                <script src="js/recogito-polyfills.js" onerror="showAdblockPopup()"></script>
                <script src="js/recogito.min.js" onerror="showAdblockPopup()"></script>
                <script src="js/annotation.js" onerror="showAdblockPopup()"></script>
            }

            <script defer>
                /* to prevent Firefox FOUC, this must be here */
                let FF_FOUC_FIX;
            </script>
        </div>
    </body>
</html>
